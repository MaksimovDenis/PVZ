# üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
```bash   
git clone https://github.com/MaksimovDenis/PVZ.git
```   
### 2. –ü–µ—Ä–µ–π—Ç–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞ (–µ—Å–ª–∏ –í—ã –Ω–µ –≤ –Ω–µ–π).  
```bash  
cd PVZ 
```  
### 3. –ò–∑ –¥–µ—Ä–∏–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã, —Å–µ—Ä–≤–∏—Å HTTP –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –ø–æ—Ä—Ç—É 8080, gRPC –ø–æ –ø–æ—Ä—Ç—É 3000:  
```bash      
docker compose up --build 
```   

### 4. –û—Å—Ç–∞–Ω–æ–≤–∫–∞  
```bash      
docker compose down
```   
# üõ†–†–µ–∞–ª–∏–∑–∞—Ü–∏—è  
- –ü–æ–¥—Ö–æ–¥ —Å —á–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π (—Å–µ—Ä–≤–∏—Å —Ä–∞–∑–±–∏—Ç –Ω–∞ DLA, BLL –∏ API —Å–ª–æ–∏).  
- –Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ: Golang 1.22.12  
- –î–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ http —Å–µ—Ä–≤–µ—Ä–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ gin  
- –ö–æ–¥–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è oapi-codegen  
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: PostgreSQL:latest
- –í –∫–∞—á–µ—Å—Ç–≤–µ –±–∏–ª–¥–µ—Ä–∞ sql –ø—Ä–∏–º–µ–Ω—è–ª—Å—è squirrel 
- –õ–æ–≥–µ—Ä zerolog   

# ‚úÖ –£—Å–ª–æ–≤–∏—è  
1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–Ω—ã–π –∫ –¢–ó API, –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π: https://github.com/MaksimovDenis/PVZ/blob/master/pvz_http/pkg/protocol/schema.yml ‚úÖ    
2. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤—Å–µ –µ–Ω–¥–ø–æ–∏–Ω—Ç—ã —É–∫–∞–∑–∞–Ω–Ω—ã–µ –≤ –∑–∞–¥–∞–Ω–∏–∏ (–ø—Ä–∏–º–µ—Ä—ã —Å–º. –Ω–∏–∂–µ) ‚úÖ    
3. –°–µ—Ä–≤–µ—Ä –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 8080. ‚úÖ   
4. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –º–µ—Ç–æ–¥—ã /login /register /dummyLogin ‚úÖ   
5. –û—Ç–≤–µ—Ç—ã —Å–µ—Ä–≤–∏—Å–∞ –Ω–µ –ø—Ä–µ–≤—ã—à–∞—é—Ç 100–º—Å ‚úÖ   
6. –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞ —Ç–µ—Å—Ç–∞–º–∏ 75% (–±–æ–ª—å—à–∞—è —á–∞—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏–π, –∫–æ—Ç–æ—Ä—É—é –º–æ–∂–Ω–æ –±—ã–ª–æ –ø–æ–∫—Ä—ã—Ç—å —é–Ω–∏—Ç —Ç–µ—Å—Ç–∞–º–∏ - –ø–æ–∫—Ä—ã—Ç–∞. –ú–æ–∫–∏ –Ω–µ –ø–∏—Å–∞–ª) ‚ùé
7. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç —Å–æ–≥–ª–∞—Å–Ω–æ —É—Å–ª–æ–≤–∏—é - https://github.com/MaksimovDenis/PVZ/blob/master/pvz_http/internal/service/pvz_serive_integration_test.go   

# üîß–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ –º–µ—Ç–æ–¥–∞–º /register –∏ /login - —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ ‚úÖ    
2. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω gRPC —Å–µ—Ä–≤–∏—Å –¥–æ—Å—Ç—É–ø–Ω—ã–π –ø–æ –ø–æ—Ä—Ç—É 3000 ‚úÖ   
3. –í –ø—Ä–æ–µ–∫—Ç –¥–æ–±–∞–≤–ª–µ–Ω prometheus, –¥–æ—Å—Ç—É–ø–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏:
    - **http_request_total** (–æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ http —Ä–∏–∫–≤–µ—Å—Ç–æ–≤)   
    - **http_request_duration_seconds** (–≥–∏—Å—Ç–æ–≥—Ä–∞–º–º–∞ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–µ—Ç–∞)    
    - **http_requests_duration_seconds_summary** (latency –æ—Ç–≤–µ—Ç–∞)   
    - **pvz_count_total** (–æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –ü–í–ó)   
    - **reception_count_total** (–æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏—ë–º–æ–∫)   
    - **products_count_total**  (–æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤)   
 –°–µ—Ä–≤–µ—Ä –¥–ª—è prometheus –ø–æ–¥–Ω—è—Ç –Ω–∞ –ø–æ—Ä—Ç—É 9000 –∏ –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ —Ä—É—á–∫–µ /metrics. ‚úÖ   
 4. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ zerolog ‚úÖ   
 5. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∫–æ–¥–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è DTO endpoint'–æ–≤ –ø–æ openapi —Å—Ö–µ–º–µ https://github.com/MaksimovDenis/PVZ/tree/master/pvz_http/pkg/protocol ‚úÖ   

# üßë‚Äçüíª–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ 
 - –≠–Ω–¥–ø–æ–∏–Ω—Ç (–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚Ññ1, ‚Ññ2): **POST /register** **POST /dummyLogin**  
   ![–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚Ññ1](images/1.png)  
   ![–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚Ññ2](images/2.png)  
 - –≠–Ω–¥–ø–æ–∏–Ω—Ç (–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ –ø–æ—á—Ç–µ –∏ –ø–∞—Ä–æ–ª—é ‚Ññ3, ‚Ññ4): **POST /login**  
   ![–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ –ø–æ—á—Ç–µ –∏ –ø–∞—Ä–æ–ª—é ‚Ññ3](images/3.png)  
   ![–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ –ø–æ—á—Ç–µ –∏ –ø–∞—Ä–æ–ª—é ‚Ññ4](images/4.png)  
 - –≠–Ω–¥–ø–æ–∏–Ω—Ç (–ó–∞–≤–µ–¥–µ–Ω–∏–µ –ü–í–ó ‚Ññ5, ‚Ññ6): **POST /pvz**  
   ![–ó–∞–≤–µ–¥–µ–Ω–∏–µ –ü–í–ó ‚Ññ5](images/5.png)  
   ![–ó–∞–≤–µ–¥–µ–Ω–∏–µ –ü–í–ó ‚Ññ6](images/6.png) 
 - –≠–Ω–¥–ø–æ–∏–Ω—Ç (–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–∏—ë–º–∫–µ —Ç–æ–≤–∞—Ä–æ–≤ ‚Ññ7, ‚Ññ8): **POST /receptions**  
   ![–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–∏—ë–º–∫–µ —Ç–æ–≤–∞—Ä–æ–≤ ‚Ññ7](images/7.png)  
   ![–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–∏—ë–º–∫–µ —Ç–æ–≤–∞—Ä–æ–≤ ‚Ññ8](images/8.png)  
 - –≠–Ω–¥–ø–æ–∏–Ω—Ç (–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–π –ø—Ä–∏—ë–º–∫–∏ ‚Ññ9, ‚Ññ10, ‚Ññ11): **POST /products**  
   ![–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–π –ø—Ä–∏—ë–º–∫–∏ ‚Ññ9](images/9.png)  
   ![–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–π –ø—Ä–∏—ë–º–∫–∏ ‚Ññ10](images/10.png) 
   ![–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–π –ø—Ä–∏—ë–º–∫–∏ ‚Ññ11](images/11.png) 
 - –≠–Ω–¥–ø–æ–∏–Ω—Ç (–£–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ –≤ —Ä–∞–º–∫–∞—Ö –Ω–µ –∑–∞–∫—Ä—ã—Ç–æ–π –ø—Ä–∏—ë–º–∫–∏ ‚Ññ12): **POST /pvz/{pvzId}/delete_last_product**  
   ![–£–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ –≤ —Ä–∞–º–∫–∞—Ö –Ω–µ –∑–∞–∫—Ä—ã—Ç–æ–π –ø—Ä–∏—ë–º–∫–∏ ‚Ññ12](images/12.png)  
 - –≠–Ω–¥–ø–æ–∏–Ω—Ç (–ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏—ë–º–∫–∏ ‚Ññ13, ‚Ññ14, ‚Ññ15): **POST /pvz/{pvzId}/close_last_reception**  
   ![–ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏—ë–º–∫–∏ ‚Ññ13](images/13.png)  
   ![–ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏—ë–º–∫–∏ ‚Ññ14](images/14.png)  
   ![–ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏—ë–º–∫–∏ ‚Ññ15](images/15.png)  
 - –≠–Ω–¥–ø–æ–∏–Ω—Ç (–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö ‚Ññ16): **GET /pvz**  
   ![–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö ‚Ññ16](images/16.png)  
 - gRPC –≠–Ω–¥–ø–æ–∏–Ω—Ç (–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö ‚Ññ17): **gRPC**  
   ![–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö ‚Ññ17](images/17.png)  

 # üöß –•–æ–¥ —Ä–µ—à–µ–Ω–∏—è
 - –ö–∞–∫ —Ç–∞–∫–æ–≤—ã—Ö –ø—Ä–æ–±–ª–µ–º –Ω–µ –≤–æ–∑–Ω–∏–∫–ª–æ, –≤ –±–∏–∑–Ω–µ—Å —Å–ª–æ–µ –æ–ø–∏—Å–∞–Ω—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å –ª–æ–≥–∏–∫–æ–π —Ä–∞–±–æ—Ç—ã.   

 # üöß –ß—Ç–æ —Å–ª–µ–¥—É–µ—Ç —É–ª—É—á—à–∏—Ç—å  
- –°—Ç–æ–∏—Ç —É–ª—É—á—à–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–æ–ª–µ–π, –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ —É—á—Ç–µ–Ω—ã, –Ω–æ –Ω–µ –≤—Å–µ.  
- –ù–µ–æ–±—Ö–æ–¥–∏–º–æ —É–ª—É—á—à–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö –æ—à–∏–±–æ–∫.  
- –î–æ–ø–æ–ª–Ω–∏—Ç—å –∫–æ–¥ –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Ç–µ—Å—Ç–æ–≤.  
- –î–æ–ø–æ–ª–Ω–∏—Ç—å —Å–µ—Ä–≤–∏—Å —Å–∏—Å—Ç–µ–º–æ–π –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è, –Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ Redis, –ø–æ –ø–∞—Ç–µ—Ä–Ω—É Singleton.
- –•–æ—Ä–æ—à–æ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å refresh –∏ access —Ç–æ–∫–µ–Ω–∞–º–∏.  